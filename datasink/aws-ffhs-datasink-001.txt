# Create Data Sink with Amazon Questions of Videogames as JSON
# Link: http://jmcauley.ucsd.edu/data/amazon/qa/qa_Video_Games.json.gz

# t2.micro AWS Instance 

# Update instance and install netcat
sudo yum -y upate
sudo yum -y install nc

# Download file
sudo mkdir /opt/files/
cd /opt/files
sudo wget http://jmcauley.ucsd.edu/data/amazon/qa/qa_Video_Games.json.gz

# Unzip files
sudo gunzip /opt/files/*.gz 

#### Datasink with Kafka Producer

# Send files to Consumer
sudo kafka-console-producer.sh --broker-list 172.31.83.3:9092 --topic test < /opt/files/qa_Video_Games.json

# Send Data to kafka consumer line by line
while read x; do echo "$x" | nc 172.31.83.3 9092; done < /opt/files/qa_Video_Games.json